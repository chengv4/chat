import{E as e,_ as t}from"./index-CCyYLrLR.js";import{E as s}from"./el-button-DnlBv-4K.js";import{_ as a,E as o,a as r}from"./el-message-box-DfMdgXFr.js";import{u as l}from"./userModels-Biv9LkZc.js";import{u as i}from"./homeModels-5xoGp63q.js";import{_ as n,r as p,f as m,M as u,u as d,o as c,D as f,I as j,V as v}from"./vendor-BExUNkqn.js";import"./wangeditor-DBHRtTKh.js";import"./el-input-Dmsq_lDB.js";import"./el-overlay-UEZ7cf3O.js";import"./utils-CNKHhdMi.js";import"./index-CuRgrL4S.js";import"./index-J3PlA855.js";import"./index-D2oWfImC.js";import"./index-CzEXEj0t.js";import"./el-select-DxNCZfPB.js";import"./el-popper-CurvTsXO.js";import"./error-D_Dr4eZ1.js";import"./event-BwRzfsZt.js";import"./scroll-zlm_klGT.js";import"./debounce-B-kQ-C49.js";import"./index-BE1zN3Jx.js";import"./el-tooltip-DZZDquXq.js";import"./el-form-item-CmBUun_E.js";import"./url-kvdBsJts.js";import"./index-DVj-xLeG.js";const g=t({__name:"UserAdmin",setup(t){const g=l(),{pageList:x,pagination:w}=n(g),b=p(null),h=p({}),{userInfo:y}=n(i()),D=m((()=>"admin"===y.value.username)),_=[{type:"input",label:"姓名",prop:"username"},{type:"query"},{type:"reset"},{render:()=>f(s,{type:"primary",onClick:()=>I({},"add")},{default:()=>[j("新增")]})}],C=m((()=>({total:x.value.total,list:x.value.list}))),M=[{prop:"username",label:"姓名",align:"center",width:"300",render:({row:t,column:s,index:a})=>f("div",{class:"name-group"},[f("div",{style:"max-width: 120px;white-space: nowrap;overflow: hidden;text-overflow:ellipsis;"},[t.username]),f("span",{class:"icon-group"},[D.value&&f(e,{title:"编辑"},{default:()=>[f(v("EditPen"),{color:"#409eff",onclick:()=>I(t,"edit")},null)]}),D.value&&f(e,{title:"删除"},{default:()=>[f(v("Delete"),{color:"red",onclick:()=>k(t)},null)]})])])},{label:"邮箱",prop:"email",align:"center"}],E=[{label:"姓名",prop:"username",type:"input",rules:[{required:!0}]},{label:"登录密码",prop:"password",type:"input",showPassword:!0,rules:[{required:!0}]},{label:"邮箱",prop:"email",type:"input",align:"center"}],I=(e,t)=>{"add"===t&&(h.value={}),"edit"===t&&(h.value={...e}),o({title:"新增/编辑",closeOnClickModal:!1,customClass:"custom-message-box",message:()=>f(r,{ref:b,formModel:h,formItems:E},null),beforeClose:(e,t,s)=>{if("confirm"===e){if(b.value){const e=b.value.form,t=b.value.formData||{};e.validate((e=>{e&&g.saveUser(t).then((e=>{0===e.code&&s()}))}))}}else s()}})},k=e=>{o({title:"",message:"确定要删除吗？",type:"warning"}).then((t=>{"confirm"===t&&g.deleteUser(e)}))};return(e,t)=>(c(),u(a,{class:"user-admin",tableData:C.value,tableColumns:M,showPagination:"",showSort:"","default-expand-all":"",fetchDataAction:d(g).getUsers,searchItems:_,pagination:d(w)},null,8,["tableData","fetchDataAction","pagination"]))}},[["__scopeId","data-v-d6989909"]]);export{g as default};
